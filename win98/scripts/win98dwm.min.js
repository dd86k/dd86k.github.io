"use strict";function form(e){var t=this.divObject=document.createElement("div");t.className="window",t.style.position="absolute",t.style.visibility="visible",t.style.left="100px",t.style.top="100px",t.style.minWidth="150px",t.style.minHeight="50px",t.style.zIndex=WindowzIndex++,t.addEventListener("mousedown",function(){WindowManager.giveFocus(t)});var n=document.createElement("div");n.className="title",n.onmousedown=function(e){WindowManager.Drag.startMoving(t,desktop,e)},n.onmouseup=function(){WindowManager.Drag.stopMoving()};var i=document.createElement("img");i.src="images/window/titleleft.png",i.className="windowicon";var o=document.createElement("span");o.innerText=e,o.style.fontWeight="bolder";var a=document.createElement("img");a.className="ctrlboxbuttonm",a.src="images/window/min.png",a.onmousedown=function(){a.src="images/window/minp.png"};var d=document.createElement("img");d.className="ctrlboxbutton",d.src="images/window/max.png";var s=document.createElement("img");s.className="ctrlboxbutton",s.src="images/window/close.png",s.onclick=function(){WindowManager.deleteWindow(t)},s.onmousedown=function(){s.src="images/window/closep.png"},n.appendChild(i),n.appendChild(o),n.appendChild(s),n.appendChild(d),n.appendChild(a),t.appendChild(n);var c=document.createElement("div");c.className="windowarea",t.appendChild(c)}form.prototype={divObject:null,setSize:function(e,t){this.divObject.style.width=e+"px",this.divObject.style.height=t+"px"},setIcon:function(e){this.divObject.childNodes[0].childNodes[0].src=e},removeIcon:function(){this.divObject.childNodes[0].childNodes[0].remove()},setLocation:function(e,t){this.divObject.style.left=e+"px",this.divObject.style.top=t+"px"},addNode:function(e){this.divObject.childNodes[1].appendChild(e)},close:function(){this.divObject.remove()}};var indexWindow=0,WindowzIndex=0,currentFocusWindow=0,WindowManager={showInfo:function(e,t){var n=new form(e);n.removeIcon(),this.makeMsgBox(n,t,0),this.addFormToDesktop(n)},showWarning:function(e,t){var n=new form(e);n.removeIcon(),this.makeMsgBox(n,t,1),this.addFormToDesktop(n)},showError:function(e,t){var n=new form(e);n.removeIcon(),this.makeMsgBox(n,t,2),this.addFormToDesktop(n)},makeMsgBox:function(e,t,n){var i=document.createElement("p");i.className="msgboxMsg";var o=document.createTextNode(t);i.appendChild(o);var a=document.createElement("img");switch(a.className="msgboxIcon",n){case 0:a.src="images/msgbox/infoicon.png";break;case 1:a.src="images/msgbox/warningicon.png";break;case 2:a.src="images/msgbox/erroricon.png"}var d=WindowManager.makeButton("OK",0,0);d.addEventListener("click",function(){WindowManager.deleteWindow(e.divObject)});var s=document.createElement("div");s.style.margin="12px 0 8px 0",s.style.width="100%",s.style.textAlign="center",s.appendChild(d),e.addNode(a),e.addNode(i),e.addNode(s)},createWindow:function(e,t,n,i){var o=new form(e);switch(o.setLocation(t,n),i){case"rundialog":o.removeIcon();var a=document.createElement("div");a.style.display="inline-flex";var d=document.createElement("div"),s=document.createElement("img");s.src="images/run/item.png",s.style.margin="14px";var c=document.createElement("p");c.innerText="Type the name of a program, folder, document, or Internet resource, and Windows will open it for you.",c.style.fontSize="11px",c.style.maxWidth="300px";var r=document.createElement("p");r.innerText="Open:",r.style.margin="4px 10px 12px 14px",r.style.display="inline-block";var l=document.createElement("textarea");l.onkeydown=function(e){13==e.which&&(o.close(),Shell.run(l.value))},l.rows=1,l.style.marginBottom="-7px",l.style.resize="none",l.style.width="80%",l.onload=function(){l.select()};var m=document.createElement("div");m.style.width="98%",m.style.textAlign="right",m.style.margin="8px 0 14px 0px";var p=WindowManager.makeButton("OK",0,0);p.style.marginRight="6px",p.addEventListener("click",function(){o.close(),Shell.run(l.value)});var u=WindowManager.makeButton("Cancel",0,0);u.style.marginRight="6px",u.addEventListener("click",function(){o.close()});var v=WindowManager.makeButton("Browse...",0,0);a.appendChild(s),a.appendChild(c),d.appendChild(r),d.appendChild(l),m.appendChild(p),m.appendChild(u),m.appendChild(v),o.addNode(a),o.addNode(d),o.addNode(m);break;case"notepad":o.setIcon("images/notepad/titleleft.png");var g=document.createElement("div");g.className="menubar";var h=document.createElement("img");h.src="images/notepad/menu.png";var w=document.createElement("textarea");w.className="notepadinput",w.style.width="200px",w.style.height="125px",g.appendChild(h),o.addNode(g),o.addNode(w);break;case"cmd":o.setIcon("images/cmd/titleleft.png");var y=document.createElement("img");y.src="images/cmd/menu.png",y.style.marginTop="2px";var f=document.createElement("div");f.className="terminal",f.style.height="250px",o.addNode(y),o.addNode(f);break;case"test":var x=WindowManager.makeButton("Test me!",0,0);x.style.marginTop="10px";var b=document.createElement("div"),N=document.createTextNode("Rad0"),W=document.createElement("input");W.type="radio",W.name="test",b.appendChild(W),b.appendChild(N);var k=document.createElement("div"),E=document.createTextNode("Rad1"),C=document.createElement("input");C.type="radio",C.name="test",k.appendChild(C),k.appendChild(E),o.addNode(b),o.addNode(k),o.addNode(x);break;case"aboutdialog":o.divObject.style.width="400px";var M="<br/><br/>",j=document.createElement("p");j.innerHTML=Project.productName+"<br/>                Version "+Project.version+M+"A web-based Windows 98 simulator. Made from scratch using only HTML5, CSS3, and Javascript. No libraries."+M+"This is only a personal project, I do not plan to monitize it."+M+"Copyright Microsoft (C) 1981-1998 for Windows 98"+M+'Everything written by DD~!<br/>You can contact me via <a href="mailto:devddstuff@gmail.com">email</a>.',j.style.textAlign="center";var I=document.createElement("div");I.style.width="100%",I.style.textAlign="center";var O=WindowManager.makeButton("Close",0,0);O.onclick=function(){o.close()};var T=WindowManager.makeButton("Spin!",0,0);T.onclick=function(){o.divObject.style.animation="spin 1s",o.divObject.style.WebkitAnimation="spin 1s",setTimeout(function(){o.divObject.style.animation="",o.divObject.style.WebkitAnimation=""},1e3)};var B=WindowManager.makeButton("Spin for ever!",125,0);B.onclick=function(){o.divObject.style.animation="spin 2s infinite linear",o.divObject.style.WebkitAnimation="spin 2s infinite linear"},O.style.marginLeft=T.style.marginLeft=B.style.marginLeft="18px",I.appendChild(O),I.appendChild(T),I.appendChild(B),o.addNode(j),o.addNode(I)}this.addFormToDesktop(o)},addFormToDesktop:function(e){desktop.appendChild(e.divObject),WindowManager.giveFocus(e.divObject),StartMenu.hide(),++indexWindow},hasIcon:function(e){switch(e){case"shutdown":case"error":case"warning":case"info":case"aboutdialog":case"test":return!1;default:return!0}},makeButton:function(e,t,n){t=0>=t?70:t,n=0>=n?22:n;var i=document.createElement("div");i.className="button",i.style.width=t+"px",i.style.height=n+"px",i.onmousedown=function(){i.className="buttondown"},i.onmouseup=function(){i.className="button"};var o=document.createElement("div");o.style.marginTop="3px",o.style.marginLeft="3px",o.style.textAlign="center",o.style.width=t-8+"px",o.style.border="1px dotted black";var e=document.createTextNode(e);return o.appendChild(e),i.appendChild(o),i},deleteWindow:function(e){e.remove()},showWindow:function(e){e.style.visibility="visible",StartMenu.hide()},hideWindow:function(e){e.style.visibility="hidden",StartMenu.hide()},giveFocus:function(e){this.removeFocusAll(),e.style.zIndex=WindowzIndex,e.childNodes[0].className="title",WindowzIndex++,currentFocusWindow=e},removeFocusAll:function(){for(var e=document.getElementsByClassName("title"),t=0;t<e.length;t++)e[t].className="ntitle"},killAllWindows:function(){for(var e=document.getElementsByClassName("window"),t=0;t<e.length;t++)e[t].remove()},hasWindowFocus:function(e){return currentFocusWindow==e},Drag:{move:function(e,t,n){e.style.left=t+"px",e.style.top=n+"px"},startMoving:function(e,t,n){var i=n.clientX,o=n.clientY,a=e.style.top,d=e.style.left;parseInt(e.style.width),parseInt(e.style.height),parseInt(t.style.width),parseInt(t.style.height);a=a.replace("px",""),d=d.replace("px","");var s=i-d,c=o-a;document.onmousemove=function(t){var n=t.clientX,i=t.clientY,o=n-s,a=i-c;WindowManager.Drag.move(e,o,a)}},stopMoving:function(){document.onmousemove=function(){}}}};