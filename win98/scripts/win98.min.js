"use strict";function start(){updateTime(),document.getElementById("desktopversion").innerHTML=Project.productName+" "+Project.version}function updateTime(){var e=new Date,n=e.getHours(),t=e.getMinutes();10>t&&(t="0"+t);var i="";n>12?(i+="PM",n-=12):i+=12==n?"PM":"AM";var r=n+":"+t+" "+i;time.innerHTML=r}function showMenu(){WindowAPI.removeFocusAll(),"hidden"==startmenu.style.visibility?(startmenu.style.visibility="visible",startbutton.src="images/startmenu/on.png"):(startmenu.style.visibility="hidden",startbutton.src="images/startmenu/off.png")}function hideMenu(){startmenu.style.visibility="hidden",startbutton.src="images/startmenu/off.png"}function startUp(e){e.innerHTML="",e.innerHTML="",writeLine("Microsoft(R) Windows 98"),writeLine("   (C)Copyrights Microsoft Corp 1981-1998"),writeLine(""),write("C:\\WINDOWS&gt;")}function write(e){currentFocusCmd.innerHTML+=e}function writeLine(e){currentFocusCmd.innerHTML+=e+Console.nl}function executeCommand(e){if(""==e||null==e)writeLine(""),write(cd);else{var n=document.getElementById("input").innerHTML,t=n.split(Console.space,1)[0].toLowerCase().trim();switch(n=n.substr(t.length).trim(),writeLine(document.getElementById("input").innerHTML),debug&&(writeLine("command: "+t),writeLine("Has args: "+(n.search(" ")>0?"Yes":"No")),writeLine("args: "+n),writeLine("== OUTPUT ==")),t){case"about":writeLine(""),writeLine("Small Windows 98 Web Env."),writeLine("Written by DD~!"),writeLine("Version: "+Project.version),writeLine(""),writeLine("");break;case"chdir":case"cd":writeLine(cd);break;case"chcp":writeLine("Active code page: 850");break;case"color":var i=n[0],r=n[1];r!=i&&(document.getElementById("output").style.color=getColor(r),document.getElementById("input").style.color=getColor(r),document.getElementById("terminal").style.backgroundColor=getColor(i));break;case"cls":document.getElementById("output").innerHTML="";break;case"date":var o=new Date,a=o.getDate(),d=o.getMonth(),s=o.getFullYear(),c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u=c[o.getDay()];10>a&&(a="0"+a),10>d&&(d="0"+d),writeLine("The current date is: "+u+" "+a+"/"+d+"/"+s);break;case"debug":debug?(debug=!1,writeLine("Debug mode turned off.")):(debug=!0,writeLine("Debug mode turned on."));break;case"echo.":case"echo=":writeLine("");break;case"echo":writeLine(n);break;case"exit":break;case"help":writeLine("about"),writeLine("chdir"),writeLine("cd"),writeLine("chcp"),writeLine("color"),writeLine("cls"),writeLine("date"),writeLine("echo"),writeLine("exit"),writeLine("path"),writeLine("rem"),writeLine("set"),writeLine("shutdown"),writeLine("time"),writeLine("title"),writeLine("ver"),writeLine("vol");break;case"ipconfig":writeLine("No.");break;case"pause":break;case"path":writeLine("PATH=C:\\Windows\\system32;C:\\Windows");break;case"prompt":break;case"rem":break;case"set":writeLine("TMP=C:WINDOWSTEMP"),writeLine("TEMP=C:WINDOWSTEMP"),writeLine("PROMPT=$p$g"),writeLine("winbootdir=C:WINDOWS"),writeLine("PATH=C:WINDOWS;C:WINDOWSCOMMAND"),writeLine("COMSPEC=C:WINDOWSCOMMAND.COM"),writeLine("windir=C:WINDOWS"),writeLine("CMDLINE=sfc");break;case"shutdown":window.location.href="../index.html";break;case"spin":document.getElementById("cmd").style.animation="spin 1s",document.getElementById("cmd").style.WebkitAnimation="spin 1s",setTimeout(function(){document.getElementById("cmd").style.animation=""},1e3),setTimeout(function(){document.getElementById("cmd").style.WebkitAnimation=""},1e3);break;case"migwiz":document.getElementById("cmd").style.animation="spin 1s infinite linear",document.getElementById("cmd").style.WebkitAnimation="spin 1s infinite linear";break;case"time":var o=new Date,m=o.getHours(),l=o.getMinutes(),p=o.getSeconds(),w=o.getMilliseconds();10>m&&(m="0"+m),10>l&&(l="0"+l),10>p&&(p="0"+p),writeLine("The current time is: "+m+":"+l+":"+p+"."+w);break;case"title":document.getElementById("title").innerHTML=n;break;case"ver":writeLine(""),writeLine("Windows 98 [Version 4.10.2222]");break;case"vol":writeLine(Console.space+"Volume in drive "+drive+" has no label"),writeLine(Console.space+"Volume Serial Number is 0EF8-C7C2");break;default:writeLine("Bad command or filename")}writeLine(""),write(cd),document.getElementById("input").innerHTML=""}}function printHelp(e){switch(e){case"help":writeLine("Displays help!")}}function cursortoggleblink(){null!=document.getElementById("cmd")&&"visible"==document.getElementById("cmd").style.visibility&&("hidden"==document.getElementById("cursor").style.visibility?document.getElementById("cursor").style.visibility="visible":document.getElementById("cursor").style.visibility="hidden")}function getColor(e){switch(e=e.toLowerCase()){case"0":return"#000000";case"1":return"#000080";case"2":return"#008000";case"3":return"#008080";case"4":return"#FF0000";case"5":return"#800080";case"6":return"#808000";case"7":return"#C0C0C0";case"8":return"#808080";case"9":return"#0000FF";case"a":return"#00FF00";case"b":return"#00FFFF";case"c":return"#FF0000";case"d":return"#FF00FF";case"e":return"#FFFF00";case"f":return"#FFFFFF"}}var cd="C:\\WINDOWS&gt;",drive="C",debug=!1,Console={space:" ",nl:"\n",Prompt:{cd:"WINDOWS",drive:"C"}},Project={productName:"Windows 98 WebSim",version:"0.3.4.3.2016"},indexWindow=0,WindowzIndex=0,currentFocusWindow,currentFocusCmd;onload=start,setInterval(updateTime,2500),startbutton.onmousedown=showMenu,desktop.onmousedown=hideMenu;var WindowAPI={showInfo:function(e,n){var t=window.innerWidth/2-150,i=window.innerHeight/2-150;WindowAPI.createWindow(e,t,i,300,200,"info",n)},showWarning:function(e,n){var t=window.innerWidth/2-150,i=window.innerHeight/2-150;WindowAPI.createWindow(e,t,i,300,200,"warning",n)},showError:function(e,n){var t=window.innerWidth/2-150,i=window.innerHeight/2-150;WindowAPI.createWindow(e,t,i,300,200,"error",n)},createWindow:function(e,n,t,i,r,o,a){var d=indexWindow,s=document.createElement("div");s.id="window"+d,s.className="window",s.style.position="absolute",s.style.top=t+"px",s.style.left=n+"px",s.style.visibility="visible",s.style.width=i+"px",s.style.height=r+"px",s.style.zIndex=WindowzIndex++,s.addEventListener("mousedown",function(){WindowAPI.giveFocus(s)});var c=document.createElement("div");c.id="title"+indexWindow,c.className="ntitle",c.addEventListener("mousedown",function(e){WindowAPI.Drag.startMoving(s,desktop,e)}),c.addEventListener("mouseup",function(){WindowAPI.Drag.stopMoving()});var u=document.createElement("img");if(WindowAPI.hasIcon(o)){u.className="windowicon";var m=document.createElement("span");m.innerHTML=e;var l=document.createElement("img");l.className="ctrlboxbuttonm",l.src="images/window/min.png",l.addEventListener("mousedown",function(){l.src="images/window/minp.png"}),l.addEventListener("mouseup",function(){l.src="images/window/minp.png",WindowAPI.hideWindow(s)});var p=document.createElement("img");p.className="ctrlboxbutton",p.src="images/window/max.png";var w=document.createElement("img");w.className="ctrlboxbutton",w.src="images/window/close.png",w.addEventListener("click",function(){WindowAPI.deleteWindow(s)}),w.addEventListener("mousedown",function(){w.src="images/window/closep.png"}),c.appendChild(u),c.appendChild(m),c.appendChild(w),c.appendChild(p),c.appendChild(l)}else{var m=document.createElement("span");m.innerHTML=e,c.appendChild(m),s.appendChild(c);var w=document.createElement("img");w.className="ctrlboxbutton",w.src="images/window/close.png",w.addEventListener("mousedown",function(){w.src="images/window/closep.png"}),w.addEventListener("mouseup",function(){w.src="images/window/close.png",WindowAPI.deleteWindow(s)}),c.appendChild(m),c.appendChild(w)}s.appendChild(c);var g=document.createElement("div");switch(g.className="windowarea",s.appendChild(g),o){case"notepad":u.src="images/notepad/titleleft.png";var y=document.createElement("img");y.className="notepadmenu",y.src="images/notepad/menu.png";var h=document.createElement("textarea");h.className="notepadinput",h.style.width=i-15+"px",h.style.height=r-53+"px",g.appendChild(y),g.appendChild(h);break;case"cmd":u.src="images/cmd/titleleft.png",s.className="window",s.style.width=i+"px",s.style.height=r+"px";var L=document.createElement("img");L.src="images/cmd/menu.png",L.style.marginTop="2px";var v=document.createElement("div");v.id="terminal"+indexWindow,v.className="terminal",v.style.width=i-16+"px",v.style.height=r-66+"px";var f=document.createElement("span");f.id="output"+indexWindow;var E=document.createElement("span");E.id="input"+indexWindow;var b=document.createElement("span");b.id="cursor"+indexWindow;var I=document.createTextNode("_");b.appendChild(I),g.appendChild(L),v.appendChild(f),v.appendChild(E),v.appendChild(b),g.appendChild(v),currentFocusCmd=v;break;case"info":var C=document.createElement("span");C.className="msgboxMsg";var W=document.createTextNode(a);C.appendChild(W);var M=document.createElement("img");M.className="msgboxIcon",M.src="images/msgbox/infoicon.png";var T=WindowAPI.makeButton("OK",0,0);T.addEventListener("click",function(){WindowAPI.deleteWindow(s)}),T.style.position="absolute",T.style.bottom="14px",T.style.left=i/2-35+"px",g.appendChild(M),g.appendChild(C),g.appendChild(T);break;case"warning":var C=document.createElement("span");C.className="msgboxMsg";var W=document.createTextNode(a);C.appendChild(W);var M=document.createElement("img");M.className="msgboxIcon",M.src="images/msgbox/warningicon.png";var T=WindowAPI.makeButton("OK",0,0);T.addEventListener("click",function(){WindowAPI.deleteWindow(s)}),T.style.position="absolute",T.style.bottom="14px",T.style.left=i/2-35+"px",g.appendChild(M),g.appendChild(C),g.appendChild(T);break;case"error":var C=document.createElement("span");C.className="msgboxMsg";var W=document.createTextNode(a);C.appendChild(W);var M=document.createElement("img");M.className="msgboxIcon",M.src="images/msgbox/erroricon.png";var T=WindowAPI.makeButton("OK",0,0);T.addEventListener("click",function(){WindowAPI.deleteWindow(s)}),T.style.position="absolute",T.style.bottom="14px",T.style.left=i/2-35+"px",g.appendChild(M),g.appendChild(C),g.appendChild(T);break;case"test":var B=WindowAPI.makeButton("Test me!",0,0);B.style.marginTop="10px";var x=document.createElement("div"),H=document.createTextNode("Rad0"),k=document.createElement("input");k.type="radio",k.name="test",x.appendChild(k),x.appendChild(H);var N=document.createElement("div"),A=document.createTextNode("Rad1"),P=document.createElement("input");P.type="radio",P.name="test",N.appendChild(P),N.appendChild(A),g.appendChild(x),g.appendChild(N),g.appendChild(B);break;case"aboutdialog":s.style.left=window.innerWidth/2-i/2+"px",s.style.top=window.innerHeight/2-r/2+"px";var F=document.createElement("p");F.innerHTML=Project.productName+"<br/>                Version "+Project.version+"<br/><br/>                A poorly made web based Windows 98 simulator. Made from scratch using only HTML5, CSS3, and Javascript.<br/><br/>                This is only a personal project and I do not plan to monetize, nor make profit off of this.<br/><br/>                <br/>                Written by DD~!<br/><br/>",F.style.textAlign="center";var D=WindowAPI.makeButton("Close",0,0);D.addEventListener("click",function(){WindowAPI.deleteWindow(s)});var K=WindowAPI.makeButton("Spin!",0,0);K.addEventListener("click",function(){s.style.animation="spin 1s",s.style.WebkitAnimation="spin 1s",setTimeout(function(){s.style.animation="",s.style.WebkitAnimation=""},1e3)});var S=WindowAPI.makeButton("Spin for ever!",125,0);S.addEventListener("click",function(){s.style.animation="spin 2s infinite linear",s.style.WebkitAnimation="spin 2s infinite linear"}),D.style.marginLeft=K.style.marginLeft=S.style.marginLeft="18px",g.appendChild(F),g.appendChild(D),g.appendChild(K),g.appendChild(S);break;default:u.src="images/window/titleleft.png"}switch(desktop.appendChild(s),o){case"cmd":startUp(v)}WindowAPI.giveFocus(s),hideMenu(),indexWindow++},hasIcon:function(e){switch(e){case"shutdown":case"error":case"warning":case"info":case"aboutdialog":case"test":return!1;default:return!0}},makeButton:function(e,n,t){n=0>=n?70:n,t=0>=t?22:t;var i=document.createElement("div");i.className="okbutton",i.style.width=n+"px",i.style.height=t+"px",i.addEventListener("mousedown",function(){i.className="okbuttonp"}),i.addEventListener("mouseup",function(){i.className="okbutton"});var r=document.createElement("div");r.style.marginTop="3px",r.style.marginLeft="3px",r.style.textAlign="center",r.style.width=n-8+"px",r.style.border="1px dotted black";var o=document.createTextNode(e);return r.appendChild(o),i.appendChild(r),i},deleteWindow:function(e){e.remove()},showWindow:function(e){e.style.visibility="visible",hideMenu()},hideWindow:function(e){e.style.visibility="hidden"},giveFocus:function(e){WindowAPI.removeFocusAll(),e.style.zIndex=WindowzIndex,e.childNodes[0].className="title",WindowzIndex++,currentFocusWindow=e},removeFocusAll:function(){for(var e=document.getElementsByClassName("title"),n=0;n<e.length;n++)e[n].className="ntitle"},killAllWindows:function(){for(var e=document.getElementsByClassName("window"),n=0;n<e.length;n++)e[n].remove()},hasWindowFocus:function(e){return currentFocusWindow==e},Drag:{move:function(e,n,t){e.style.left=n+"px",e.style.top=t+"px"},startMoving:function(e,n,t){var i=t.clientX,r=t.clientY,o=e.style.top,a=e.style.left,d=parseInt(e.style.width),s=parseInt(e.style.height),c=parseInt(n.style.width),u=parseInt(n.style.height);o=o.replace("px",""),a=a.replace("px","");var m=i-a,l=r-o;document.onmousemove=function(n){var t=n.clientX,i=n.clientY,r=t-m,o=i-l;0>r&&(r=0),0>o&&(o=0),r+d>c&&(r=c-d),o+s>u&&(o=u-s),WindowAPI.Drag.move(e,r,o)}},stopMoving:function(){document.onmousemove=function(){}}}};Element.prototype.remove=function(){this.parentElement.removeChild(this)},NodeList.prototype.remove=HTMLCollection.prototype.remove=function(){for(var e=0,n=this.length;n>e;e++)this[e]&&this[e].parentElement&&this[e].parentElement.removeChild(this[e])};var trapfunction=function(e){var n;switch(window.event?n=window.event.keyCode:e.which&&(n=e.which),n){case 8:if("visible"==document.getElementById("cmd").style.visibility){var t=document.getElementById("input").innerHTML;return document.getElementById("input").innerHTML=t.substr(0,t.length-1),!1}break;case 13:return executeCommand(document.getElementById("input").innerHTML),!1;case 32:return document.getElementById("input").innerHTML+=Console.space,!1;case 37:case 39:return!1;case 49:return document.getElementById("input").innerHTML+=e.shiftKey?"!":"1",!1;case 50:return document.getElementById("input").innerHTML+=e.shiftKey?"@":"2",!1;case 51:return document.getElementById("input").innerHTML+=e.shiftKey?"#":"3",!1;case 52:return document.getElementById("input").innerHTML+=e.shiftKey?"$":"4",!1;case 53:return document.getElementById("input").innerHTML+=e.shiftKey?"%":"5",!1;case 54:return document.getElementById("input").innerHTML+=e.shiftKey?"^":"6",!1;case 55:return document.getElementById("input").innerHTML+=e.shiftKey?"&":"7",!1;case 56:return document.getElementById("input").innerHTML+=e.shiftKey?"*":"8",!1;case 57:return document.getElementById("input").innerHTML+=e.shiftKey?"(":"9",!1;case 48:return document.getElementById("input").innerHTML+=e.shiftKey?")":"0",!1;case 67:return e.ctrlKey?(writeLine(document.getElementById("input").innerHTML+"^C"),write("C:\\WINDOWS&gt;"),document.getElementById("input").innerHTML="",!1):e.shiftKey?(document.getElementById("input").innerHTML+=String.fromCharCode(n),!1):(document.getElementById("input").innerHTML+=String.fromCharCode(n).toLowerCase(),!1);case 91:case 92:case 93:return!0;case 96:return document.getElementById("input").innerHTML+="0",!1;case 97:return document.getElementById("input").innerHTML+="1",!1;case 98:return document.getElementById("input").innerHTML+="2",!1;case 99:return document.getElementById("input").innerHTML+="3",!1;case 100:return document.getElementById("input").innerHTML+="4",!1;case 101:return document.getElementById("input").innerHTML+="5",!1;case 102:return document.getElementById("input").innerHTML+="6",!1;case 103:return document.getElementById("input").innerHTML+="7",!1;case 104:return document.getElementById("input").innerHTML+="8",!1;case 105:return document.getElementById("input").innerHTML+="9",!1;case 106:return document.getElementById("input").innerHTML+="*",!1;case 107:return document.getElementById("input").innerHTML+="+",!1;case 109:return document.getElementById("input").innerHTML+="-",!1;case 110:return document.getElementById("input").innerHTML+=".",!1;case 111:return document.getElementById("input").innerHTML+="/",!1;case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:return!0;case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:return!0;case 186:return document.getElementById("input").innerHTML+=e.shiftKey?":":";",!1;case 187:return document.getElementById("input").innerHTML+=e.shiftKey?"+":"=",!1;case 188:return document.getElementById("input").innerHTML+=e.shiftKey?"<":",",!1;case 189:return document.getElementById("input").innerHTML+=e.shiftKey?"_":"-",!1;case 190:return document.getElementById("input").innerHTML+=e.shiftKey?">":".",!1;case 191:return document.getElementById("input").innerHTML+=e.shiftKey?"?":"/",!1;case 192:return document.getElementById("input").innerHTML+=e.shiftKey?'"':"'",!1;case 219:return document.getElementById("input").innerHTML+=e.shiftKey?"{":"[",!1;case 220:return document.getElementById("input").innerHTML+=e.shiftKey?"|":"\\",!1;case 221:return document.getElementById("input").innerHTML+=e.shiftKey?"}":"]",!1;default:return e.shiftKey?(document.getElementById("input").innerHTML+=String.fromCharCode(n),!1):e.ctrlKey?!1:(document.getElementById("input").innerHTML+=String.fromCharCode(n).toLowerCase(),!1)}return!0};document.onkeydown=trapfunction,document.onkeypress=trapfunction;