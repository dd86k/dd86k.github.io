"use strict";function Form(e){var t=this.thisRef=activeForm=this,n=this.obj=document.createElement("div");n.className="window",n.style.visibility="visible",n.style.left="0px",n.style.top="0px",n.style.zIndex=++WindowZIndex,n.onmousedown=function(){t.focus()};var o=this.titlebarObj=document.createElement("div");o.className="atitlebar",o.onmousedown=function(e){WindowManager.Drag.startMoving(n,desktoparea,e)},o.onmouseup=function(){WindowManager.Drag.stopMoving()};var a=document.createElement("img");a.src="images/window/icon.png",a.className="windowicon";var i=this.titleObj=document.createElement("span");i.className="titlebartext",i.innerText=e;var s=document.createElement("img");s.className="ctrlboxbutton",s.src="images/window/min.png";var r=document.createElement("img");r.className="ctrlboxbutton",r.src="images/window/max.png";var d=this.closeButtonObj=document.createElement("img");d.className="ctrlboxbuttonc",d.src="images/window/close.png",d.onclick=function(){t.close()},d.onmousedown=function(){d.src="images/window/closep.png"},o.appendChild(a),o.appendChild(i),o.appendChild(d),o.appendChild(r),o.appendChild(s),n.appendChild(o);var l=this.windowAreaObj=document.createElement("div");l.className="windowarea",n.appendChild(l)}function Button(e,t,n){var o=this.obj=document.createElement("div");o.className="button",o.style.minWidth=(void 0===t?72:t)+"px",o.style.minHeight=(void 0===n?17:n)+"px",o.onmousedown=function(){o.className="buttondown"},o.onmouseup=function(){o.className="button"},o.tabIndex=0;var a=document.createElement("div");a.className="innerbutton",a.innerText=e,o.appendChild(a)}function ProgressBar(){}Form.prototype={thisRef:null,obj:null,titlebarObj:null,titleObj:null,closeButtonObj:null,windowAreaObj:null,taskbarButtonObj:null,iconExists:!0,setSize:function(e,t){this.obj.style.width=e+"px",this.obj.style.height=t+"px"},setWidth:function(e){this.obj.style.width=e+"px"},setHeight:function(e){this.obj.style.height=e+"px"},focus:function(){null!=activeForm&&activeForm.unfocus(),activeForm=this.thisRef,this.titlebarObj.className="atitlebar",this.obj.style.zIndex=++WindowZIndex,null!=this.taskbarButtonObj&&(this.taskbarButtonObj.className="tb-focus")},unfocus:function(){this.titlebarObj.className="ititlebar",activeForm=null,null!=this.taskbarButtonObj&&(this.taskbarButtonObj.className="tb")},removeMinAndMaxButtons:function(){for(var e=this.obj.childNodes[0].getElementsByClassName("ctrlboxbutton"),t=e.length-1;t>=0;--t)e[t].remove()},setTitle:function(e){this.titleObj.innerText=e},getTitle:function(){return this.titleObj.innerText},setIcon:function(e){this.iconExists&&(this.obj.childNodes[0].childNodes[0].src=e)},getIcon:function(){return this.iconExists?this.obj.childNodes[0].childNodes[0].src:null},hideIcon:function(){this.iconExists&&(this.obj.childNodes[0].childNodes[0].style.display="none")},removeIcon:function(){this.iconExists&&(this.obj.childNodes[0].childNodes[0].remove(),this.iconExists=!1)},setLocation:function(e,t){this.obj.style.left=e+"px",this.obj.style.top=t+"px"},addNode:function(e){this.windowAreaObj.appendChild(e)},close:function(){this.obj.remove(),null!=this.taskbarButtonObj&&this.taskbarButtonObj.remove()}},Button.prototype={obj:null},ProgressBar.prototype={};var WindowZIndex=0,activeForm=null,WindowManager={showError:function(e,t){var n=new Form(e);WindowManager.makeMsgBox(n,t,16),WindowManager.addFormToDesktop(n)},showQuestion:function(e,t){var n=new Form(e);WindowManager.makeMsgBox(n,t,32),WindowManager.addFormToDesktop(n)},showWarning:function(e,t){var n=new Form(e);WindowManager.makeMsgBox(n,t,48),WindowManager.addFormToDesktop(n)},showInfo:function(e,t){var n=new Form(e);WindowManager.makeMsgBox(n,t,64),WindowManager.addFormToDesktop(n)},makeMsgBox:function(e,t,n){e.removeMinAndMaxButtons(),e.removeIcon(),e.setLocation(200,100);var o=document.createElement("p");o.className="msgboxMsg";var a=document.createTextNode(t);o.appendChild(a);var i=document.createElement("img");switch(i.className="msgboxIcon",n){case 16:i.src="images/msgbox/critical.png";break;case 32:i.src="images/msgbox/question.png";break;case 48:i.src="images/msgbox/exclamation.png";break;case 64:i.src="images/msgbox/info.png"}var s=new Button("OK").obj;s.tabIndex=25,s.addEventListener("click",function(){e.close()});var r=document.createElement("div");r.style.margin="12px 0 8px 0",r.style.width="100%",r.style.textAlign="center",r.appendChild(s),e.addNode(i),e.addNode(o),e.addNode(r)},createWindow:function(e,t,n,o){var a=new Form(e);switch(a.setLocation(t,n),o){case"rundialog":a.removeMinAndMaxButtons(),a.removeIcon(),a.setSize(347,163),a.setLocation(5,innerHeight-201);var i=document.createElement("div");i.style.display="inline-block";var s=document.createElement("div"),r=document.createElement("img");r.src="images/run/item.png",r.style.margin="20px 14px",r.style.display="inline-block";var d=document.createElement("p");d.innerText="Type the name of a program, folder, document, or Internet resource, and Windows will open it for you.",d.style.fontSize="12px",d.style.maxWidth="280px",d.style.cssFloat="right",d.style.marginTop="18px";var l=document.createElement("p");l.innerText="Open:",l.style.margin="4px 10px 12px 14px",l.style.display="inline-block";var c=document.createElement("input");c.type="text",c.style.display="inline-block",c.onkeydown=function(e){return 13==e.which?(Shell.run(c.value),a.close(),!1):void 0},c.style.marginBottom="-7px",c.style.width="277px";var m=document.createElement("div");m.style.textAlign="right",m.style.margin="6px 8px";var u=new Button("OK").obj;u.style.marginRight="6px",u.onclick=function(){a.close(),Shell.run(c.value)};var p=new Button("Cancel").obj;p.style.marginRight="6px",p.onclick=function(){a.close()};var h=new Button("Browse...").obj;i.appendChild(r),i.appendChild(d),s.appendChild(l),s.appendChild(c),m.appendChild(u),m.appendChild(p),m.appendChild(h),a.addNode(i),a.addNode(s),a.addNode(m);break;case"notepad":a.setIcon("images/notepad/icon.png");var b=document.createElement("div");b.className="menubar";var g=document.createElement("img");g.src="images/notepad/menu.png";var v=document.createElement("textarea");v.className="notepadinput",v.style.width="200px",v.style.height="125px",b.appendChild(g),a.addNode(b),a.addNode(v);break;case"iexplore":a.setIcon("images/iexplore/icon.png");var w=document.createElement("div"),x=document.createElement("img");x.src="images/iexplore/b.png";var f=document.createElement("span");f.innerText="Address";var y=document.createElement("input");y.type="text",w.appendChild(x),w.appendChild(f),w.appendChild(y);var j=document.createElement("iframe");y.onkeydown=function(e){return 13==e.which?(j.src=y.value,a.setTitle(y.value+" - Microsoft Internet Explorer"),!1):void 0},a.addNode(w),a.addNode(j);break;case"command":a.setIcon("images/command/icon.png");var k=document.createElement("img");k.src="images/command/menu.png",k.style.marginTop="2px";var E=new Command;E.con.form=a;var N=E.obj;a.addNode(k),a.addNode(N);break;case"contests":var C=new Conhost,B=new Button("Write 'Test'").obj;B.onclick=function(){C.write("Test")},a.addNode(B),a.addNode(C.obj);break;case"tests":var M=document.createElement("form"),T=document.createElement("input");T.type="radio",T.name="rtest";var W=document.createElement("label");W.innerText="Radio 0";var I=document.createElement("input");I.type="radio",I.name="rtest";var O=document.createElement("label");O.innerText="Radio 1";var F=document.createElement("input");F.type="checkbox";var S=document.createElement("label");S.innerText="Checkbox 0";var A=document.createElement("input");A.type="checkbox";var D=document.createElement("label");D.innerText="Checkbox 1",M.appendChild(T),M.appendChild(W),M.appendChild(I),M.appendChild(O),M.appendChild(F),M.appendChild(S),M.appendChild(A),M.appendChild(D),a.addNode(M);var L=new Button("Button as block").obj;L.style.marginBottom="6px",L.style.display="block",a.addNode(L);var R=document.createElement("textarea");R.defaultValue="Title",R.placeholder="Title",R.rows=1;var z=document.createElement("textarea");z.defaultValue="Message",z.placeholder="Message",z.rows=1;var H=document.createElement("div"),P=new Button("Create info").obj;P.style.marginRight="4px",P.onclick=function(){WindowManager.showInfo(R.value,z.value)};var Y=new Button("Create warning").obj;Y.style.marginRight="4px",Y.onclick=function(){WindowManager.showWarning(R.value,z.value)};var V=new Button("Create error").obj;V.onclick=function(){WindowManager.showError(R.value,z.value)},H.appendChild(P),H.appendChild(Y),H.appendChild(V),a.addNode(R),a.addNode(z),a.addNode(H);var Z=new Button("Close").obj;Z.style.cssFloat="right",Z.style.marginTop="4px",Z.onclick=function(){a.close()},a.addNode(Z);break;case"aboutdialog":a.removeMinAndMaxButtons(),a.setWidth(400);var K="<br/><br/>",X=document.createElement("p");X.innerHTML=Project.name+"<br/>                    Version "+Project.version+K+"A web-based Windows 98 simulator. Made from scratch using only HTML5, CSS3, and Javascript. No libraries."+K+"This is only a personal project, I do not plan to monetize it."+K+"Copyright Microsoft (C) 1981-1998 for Windows 98"+K+'Everything written by DD~!<br/>You can contact me via <a href="mailto:devddstuff@gmail.com">email</a>.',X.style.textAlign="center";var q=document.createElement("div");q.style.width="100%",q.style.textAlign="right";var J=new Button("Close").obj;J.onclick=function(){a.close()},J.style.marginLeft="6px";var Q=new Button("Spin!").obj;Q.onclick=function(){a.obj.style.animation="spin 1s",setTimeout(function(){a.obj.style.animation=null},1e3)},q.appendChild(Q),q.appendChild(J),a.addNode(X),a.addNode(q);break;case"logoff":a.removeMinAndMaxButtons(),a.removeIcon(),a.setSize(288,123),a.setLocation(innerWidth/2-144,innerHeight/2-123),a.obj.onmousedown=a.titlebarObj.onmousedown=null,a.obj.style.zIndex="8000001";var G=document.createElement("div");G.className="shutdownbg";var U=document.createElement("img");U.src="images/startmenu/item02.png",U.style.cssFloat="left",U.style.margin="19px 22px";var d=document.createElement("p");d.style.display="inline-block",d.style.margin="22px 0 14px 0",d.innerText="Are you sure you want to log off?";var $=document.createElement("div");$.style.textAlign="center",$.style.margin="12px 0 14px 0";var _=new Button("Yes",65).obj;_.onclick=function(){};var ee=function(){a.close(),G.remove()},te=new Button("No",65).obj;return te.onclick=ee,te.style.marginLeft="10px",a.closeButtonObj.onclick=ee,$.appendChild(_),$.appendChild(te),a.addNode(U),a.addNode(d),a.addNode($),Startmenu.hide(),desktop.appendChild(G),void desktop.appendChild(a.obj)}WindowManager.addFormToDesktop(a)},addFormToDesktop:function(e){e.iconExists&&WindowManager.addTaskbarButton(e),desktoparea.appendChild(e.obj),Startmenu.hide()},addTaskbarButton:function(e){var t=maintoolbar.rows[0].insertCell(-1);t.className="tb-focus",t.onmousedown=function(){t.className="tb-down"},t.onclick=function(){Startmenu.hide(),e.focus()};var n=document.createElement("img");n.src=e.getIcon();var o=document.createElement("span");o.innerText=e.getTitle(),t.appendChild(n),t.appendChild(o),e.taskbarButtonObj=t},unfocusActiveWindow:function(){null!=activeForm&&activeForm.unfocus()},Drag:{move:function(e,t,n){e.style.left=t+"px",e.style.top=n+"px"},startMoving:function(e,t,n){var o=n.clientX,a=n.clientY,i=e.style.top,s=e.style.left;parseInt(e.style.width),parseInt(e.style.height),parseInt(t.style.width),parseInt(t.style.height);i=i.replace("px",""),s=s.replace("px","");var r=o-s,d=a-i;document.onmousemove=function(t){var n=t.clientX,o=t.clientY,a=n-r,i=o-d;WindowManager.Drag.move(e,a,i)}},stopMoving:function(){document.onmousemove=null}},Systray:{}},Startmenu={visible:!1,show:function(){WindowManager.unfocusActiveWindow(),Startmenu.visible?(win98menu.style.display="none",startbutton.src="images/startmenu/off.png",Startmenu.visible=!1):(win98menu.style.display="block",startbutton.src="images/startmenu/on.png",Startmenu.visible=!0)},hide:function(){win98menu.style.display="none",startbutton.src="images/startmenu/off.png",Startmenu.visible=!1}};startbutton.onmousedown=Startmenu.show,desktoparea.onmousedown=Startmenu.hide;