"use strict";function Form(e){var t=this.thisRef=activeForm=this,n=this.divObject=document.createElement("div");n.className="window",n.style.visibility="visible",n.style.left="0px",n.style.top="0px",n.style.zIndex=++WindowZIndex,n.onmousedown=function(){t.focus()};var a=this.titlebarObj=document.createElement("div");a.className="atitlebar",a.onmousedown=function(e){WindowManager.Drag.startMoving(n,desktoparea,e)},a.onmouseup=function(){WindowManager.Drag.stopMoving()};var i=document.createElement("img");i.src="images/window/titleleft.png",i.className="windowicon";var o=this.titleObj=document.createElement("span");o.className="titlebartext",o.innerText=e;var d=document.createElement("img");d.className="ctrlboxbutton",d.src="images/window/min.png";var s=document.createElement("img");s.className="ctrlboxbutton",s.src="images/window/max.png";var r=document.createElement("img");r.className="ctrlboxbuttonc",r.src="images/window/close.png",r.onclick=function(){t.close()},r.onmousedown=function(){r.src="images/window/closep.png"},a.appendChild(i),a.appendChild(o),a.appendChild(r),a.appendChild(s),a.appendChild(d),n.appendChild(a);var c=this.windowAreaObj=document.createElement("div");c.className="windowarea",n.appendChild(c)}Form.prototype={thisRef:null,divObject:null,titlebarObj:null,titleObj:null,windowAreaObj:null,taskbarButtonObj:null,iconExists:!0,setSize:function(e,t){this.divObject.style.width=e+"px",this.divObject.style.height=t+"px"},setWidth:function(e){this.divObject.style.width=e+"px"},setHeight:function(e){this.divObject.style.height=e+"px"},focus:function(){null!=activeForm&&activeForm.unfocus(),activeForm=this.thisRef,this.titlebarObj.className="atitlebar",this.divObject.style.zIndex=++WindowZIndex,null!=this.taskbarButtonObj&&(this.taskbarButtonObj.className="tb-focus")},unfocus:function(){this.titlebarObj.className="ititlebar",activeForm=null,null!=this.taskbarButtonObj&&(this.taskbarButtonObj.className="tb")},removeMinAndMaxButtons:function(){for(var e=this.divObject.childNodes[0].getElementsByClassName("ctrlboxbutton"),t=e.length-1;t>=0;--t)e[t].remove()},setTitle:function(e){this.titleObj.innerText=e},getTitle:function(){return this.titleObj.innerText},setIcon:function(e){this.iconExists&&(this.divObject.childNodes[0].childNodes[0].src=e)},getIcon:function(){return this.iconExists?this.divObject.childNodes[0].childNodes[0].src:null},hideIcon:function(){this.iconExists&&(this.divObject.childNodes[0].childNodes[0].style.display="none")},removeIcon:function(){this.iconExists&&(this.divObject.childNodes[0].childNodes[0].remove(),this.iconExists=!1)},setLocation:function(e,t){this.divObject.style.left=e+"px",this.divObject.style.top=t+"px"},addNode:function(e){this.windowAreaObj.appendChild(e)},close:function(){this.divObject.remove(),null!=this.taskbarButtonObj&&this.taskbarButtonObj.remove()}};var WindowZIndex=0,activeForm=null,WindowManager={showInfo:function(e,t){var n=new Form(e);WindowManager.makeMsgBox(n,t,0),WindowManager.addFormToDesktop(n)},showWarning:function(e,t){var n=new Form(e);WindowManager.makeMsgBox(n,t,1),WindowManager.addFormToDesktop(n)},showError:function(e,t){var n=new Form(e);WindowManager.makeMsgBox(n,t,2),WindowManager.addFormToDesktop(n)},makeMsgBox:function(e,t,n){e.removeMinAndMaxButtons(),e.removeIcon(),e.setLocation(200,100);var a=document.createElement("p");a.className="msgboxMsg";var i=document.createTextNode(t);a.appendChild(i);var o=document.createElement("img");switch(o.className="msgboxIcon",n){case 0:o.src="images/msgbox/infoicon.png";break;case 1:o.src="images/msgbox/warningicon.png";break;case 2:o.src="images/msgbox/erroricon.png"}var d=WindowManager.makeButton("OK");d.tabIndex=25,d.addEventListener("click",function(){WindowManager.deleteWindow(e.divObject)});var s=document.createElement("div");s.style.margin="12px 0 8px 0",s.style.width="100%",s.style.textAlign="center",s.appendChild(d),e.addNode(o),e.addNode(a),e.addNode(s)},createWindow:function(e,t,n,a){var i=new Form(e);switch(i.setLocation(t,n),a){case"rundialog":i.removeMinAndMaxButtons(),i.removeIcon(),i.setSize(347,163),i.setLocation(5,innerHeight-201);var o=document.createElement("div");o.style.display="inline-block";var d=document.createElement("div"),s=document.createElement("img");s.src="images/run/item.png",s.style.margin="20px 14px",s.style.display="inline-block";var r=document.createElement("p");r.innerText="Type the name of a program, folder, document, or Internet resource, and Windows will open it for you.",r.style.fontSize="11px",r.style.maxWidth="280px",r.style.cssFloat="Right",r.style.marginTop="18px";var c=document.createElement("p");c.innerText="Open:",c.style.margin="4px 10px 12px 14px",c.style.display="inline-block";var l=document.createElement("input");l.type="text",l.style.display="inline-block",l.onkeydown=function(e){return 13==e.which?(Shell.run(l.value),i.close(),!1):void 0},l.style.marginBottom="-7px",l.style.width="277px";var m=document.createElement("div");m.style.textAlign="right",m.style.margin="6px 8px";var u=WindowManager.makeButton("OK");u.style.marginRight="6px",u.onclick=function(){i.close(),Shell.run(l.value)};var p=WindowManager.makeButton("Cancel");p.style.marginRight="6px",p.onclick=function(){i.close()};var h=WindowManager.makeButton("Browse...");o.appendChild(s),o.appendChild(r),d.appendChild(c),d.appendChild(l),m.appendChild(u),m.appendChild(p),m.appendChild(h),i.addNode(o),i.addNode(d),i.addNode(m);break;case"notepad":i.setIcon("images/notepad/titleleft.png");var v=document.createElement("div");v.className="menubar";var g=document.createElement("img");g.src="images/notepad/menu.png";var b=document.createElement("textarea");b.className="notepadinput",b.style.width="200px",b.style.height="125px",v.appendChild(g),i.addNode(v),i.addNode(b);break;case"iexplore":i.setIcon("images/iexplore/icon.png");var w=document.createElement("div"),x=document.createElement("img");x.src="images/iexplore/b.png";var f=document.createElement("span");f.innerText="Address";var y=document.createElement("input");y.type="text",w.appendChild(x),w.appendChild(f),w.appendChild(y);var k=document.createElement("iframe");y.onkeydown=function(e){return 13==e.which?(k.src=y.value,i.setTitle(y.value+" - Microsoft Internet Explorer"),!1):void 0},i.addNode(w),i.addNode(k);break;case"cmd":i.setIcon("images/cmd/titleleft.png");var E=document.createElement("img");E.src="images/cmd/menu.png",E.style.marginTop="2px";var M=document.createElement("div");M.className="conscr",i.addNode(E),i.addNode(M);break;case"tests":var N=document.createElement("form"),C=document.createElement("input");C.type="radio",C.name="rtest";var W=document.createElement("label");W.innerText="Radio 0";var j=document.createElement("input");j.type="radio",j.name="rtest";var O=document.createElement("label");O.innerText="Radio 1";var B=document.createElement("input");B.type="checkbox";var T=document.createElement("label");T.innerText="Checkbox 0";var I=document.createElement("input");I.type="checkbox";var F=document.createElement("label");F.innerText="Checkbox 1",N.appendChild(C),N.appendChild(W),N.appendChild(j),N.appendChild(O),N.appendChild(B),N.appendChild(T),N.appendChild(I),N.appendChild(F),i.addNode(N);var A=WindowManager.makeButton("Button");A.style.marginBottom="6px",A.style.display="block",i.addNode(A);var S=document.createElement("textarea");S.defaultValue="Title",S.placeholder="Title",S.rows=1;var D=document.createElement("textarea");D.defaultValue="Message",D.placeholder="Message",D.rows=1;var R=document.createElement("div"),L=WindowManager.makeButton("Create info");L.style.marginRight="4px",L.onclick=function(){WindowManager.showInfo(S.value,D.value)};var z=WindowManager.makeButton("Create warning");z.style.marginRight="4px",z.onclick=function(){WindowManager.showWarning(S.value,D.value)};var H=WindowManager.makeButton("Create error");H.onclick=function(){WindowManager.showError(S.value,D.value)},R.appendChild(L),R.appendChild(z),R.appendChild(H),i.addNode(S),i.addNode(D),i.addNode(R);var V=WindowManager.makeButton("Close");V.style.cssFloat="right",V.style.marginTop="4px",V.onclick=function(){i.close()},i.addNode(V);break;case"aboutdialog":i.removeMinAndMaxButtons(),i.setWidth(400);var Y="<br/><br/>",Z=document.createElement("p");Z.innerHTML=Project.name+"<br/>                    Version "+Project.version+Y+"A web-based Windows 98 simulator. Made from scratch using only HTML5, CSS3, and Javascript. No libraries."+Y+"This is only a personal project, I do not plan to monitize it."+Y+"Copyright Microsoft (C) 1981-1998 for Windows 98"+Y+'Everything written by DD~!<br/>You can contact me via <a href="mailto:devddstuff@gmail.com">email</a>.',Z.style.textAlign="center";var K=document.createElement("div");K.style.width="100%",K.style.textAlign="right";var P=WindowManager.makeButton("Close");P.onclick=function(){i.close()},P.style.marginLeft="6px";var X=WindowManager.makeButton("Spin!");X.onclick=function(){i.divObject.style.animation="spin 1s",setTimeout(function(){i.divObject.style.animation=null},1e3)},K.appendChild(X),K.appendChild(P),i.addNode(Z),i.addNode(K)}WindowManager.addFormToDesktop(i)},addFormToDesktop:function(e){e.iconExists&&WindowManager.addTaskbarButton(e),desktoparea.appendChild(e.divObject),StartMenu.hide()},addTaskbarButton:function(e){var t=maintoolbar.rows[0].insertCell(-1);t.className="tb-focus",t.onmousedown=function(){t.className="tb-down"},t.onclick=function(){e.focus()};var n=document.createElement("img");n.src=e.getIcon();var a=document.createElement("span");a.innerText=e.getTitle(),t.appendChild(n),t.appendChild(a),e.taskbarButtonObj=t},makeButton:function(e,t){var n=document.createElement("div");n.className="button",n.style.width=(void 0===t?72:72>t?72:t)+"px",n.onmousedown=function(){n.className="buttondown"},n.onmouseup=function(){n.className="button"},n.tabIndex=0;var a=document.createElement("div");return a.className="innerbutton",a.innerText=e,n.appendChild(a),n},deleteWindow:function(e){e.remove()},unfocusActiveWindow:function(){null!=activeForm&&activeForm.unfocus()},Drag:{move:function(e,t,n){e.style.left=t+"px",e.style.top=n+"px"},startMoving:function(e,t,n){var a=n.clientX,i=n.clientY,o=e.style.top,d=e.style.left;parseInt(e.style.width),parseInt(e.style.height),parseInt(t.style.width),parseInt(t.style.height);o=o.replace("px",""),d=d.replace("px","");var s=a-d,r=i-o;document.onmousemove=function(t){var n=t.clientX,a=t.clientY,i=n-s,o=a-r;WindowManager.Drag.move(e,i,o)}},stopMoving:function(){document.onmousemove=null}}},StartMenu={show:function(){WindowManager.unfocusActiveWindow(),"hidden"==startmenu.style.visibility?(startmenu.style.visibility="visible",startbutton.src="images/startmenu/on.png"):(startmenu.style.visibility="hidden",startbutton.src="images/startmenu/off.png")},hide:function(){startmenu.style.visibility="hidden",startbutton.src="images/startmenu/off.png"}};startbutton.onmousedown=StartMenu.show,desktoparea.onmousedown=StartMenu.hide;