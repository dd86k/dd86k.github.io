"use strict";function Conhost(){var t=(this.thisRef=this,this.obj=document.createElement("textarea"));t.className="conhost",t.readOnly=!0}function Command(){var t=this.con=new Conhost;this.obj=t.obj;var e=this;this.obj.onkeydown=function(s){return e.readKey(s),t.update(),!1},t.writel(),t.writel("Microsoft Windows(R)"),t.writel("   (C)Copyright Microsoft Corp 1981-1998"),t.writel(),t.writel("Prompt version "+this.version),this.printPrompt()}function getColor(t){switch(t){case"0":return"#000000";case"1":return"#000080";case"2":return"#008000";case"3":return"#008080";case"4":return"#FF0000";case"5":return"#800080";case"6":return"#808000";case"7":return"#C0C0C0";case"8":return"#808080";case"9":return"#0000FF";case"A":case"a":return"#00FF00";case"B":case"b":return"#00FFFF";case"C":case"c":return"#FF0000";case"D":case"d":return"#FF00FF";case"E":case"e":return"#FFFF00";case"F":case"f":return"#FFFFFF"}}Conhost.prototype={version:"0.1.0",thisRef:null,obj:null,form:null,stdin:"",stdout:"",echo:!0,read:function(){},readLine:function(){},write:function(t){this.stdout+=t,this.update(),this.obj.scrollTop=this.obj.scrollHeight},writel:function(t){void 0!=t?this.stdout+=t+"\n":this.stdout+="\n",this.update(),this.obj.scrollTop=this.obj.scrollHeight},clearIn:function(){this.stdin="",this.update()},clearOut:function(){this.stdout="",this.update()},changeColorHex:function(){},update:function(){this.obj.value=this.stdout+this.stdin},exit:function(){this.form.close()}},Command.prototype={version:"0.1.0",con:null,obj:null,cd:"C:\\",prompt:"$P$G",readKey:function(t){switch(t=t||window.event,t.keyCode){case 38:case 39:case 40:case 9:case 20:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 123:case 144:case 145:case 19:case 16:case 17:case 18:case 91:case 92:break;case 13:var e=this.con.stdin;e.length>0?(this.con.stdin="",this.con.writel(e),this.execute(e),this.printPrompt()):this.printPrompt();break;case 37:case 8:this.con.stdin.length>0&&(this.con.stdin=this.con.stdin.substring(0,this.con.stdin.length-1));break;default:t.shiftKey?t.keyCode>=65&&t.keyCode<=90?this.con.stdin+=String.fromCharCode(t.keyCode):this.con.stdin+=t.key:32==t.keyCode?this.con.stdin+=" ":this.con.stdin+=t.key}},execute:function(t){if(void 0!=t&&null!=t&&t.length>0){var e=t.split(" ");switch(e[0].toLowerCase()){case"echo":e.length>1?this.con.writel(t.substring(5)):this.con.writel("ECHO is "+(this.con.echo?"on":"off"));break;case"chcp":this.con.writel("Active code page: ???");break;case"cls":this.con.stdin="",this.con.stdout="",this.con.update();break;case"date":this.con.writel("Current date is "+(new Date).toDateString());break;case"exit":this.con.exit();break;case"help":this.con.writel("Good luck.");break;case"time":this.con.writel("Current time is "+(new Date).toTimeString());break;case"spin":var s=this.con.form.obj;s.style.animation="spin 1s",setTimeout(function(){s.style.animation=null},1e3);break;case"rem":break;case"ver":this.con.writel(),this.con.writel("Windows 98 [Version "+Project.version+"]"),this.con.writel("Prompt Version "+this.version+", Host: "+this.con.version),this.con.writel();break;case"vol":this.con.writel(),this.con.writel(" Volume in C is WIN98"),this.con.writel(" Volume Serial Numner is 497D-039A"),this.con.writel();break;default:0!=Shell.run(e[0],null,!0)&&this.con.writel("Bad command or file name")}}},printPrompt:function(){this.con.writel(),this.con.write("C:\\>")}};